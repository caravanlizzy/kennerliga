import{k as V,b as F,aN as ne,aO as oe,a8 as P,p as K,h as I,m as A,y as D,e as Z,o,A as p,F as m,a as _,C as h,aP as R,w as C,c as N,X as E,ac as q,aa as M,a9 as U,a6 as G,a5 as O,D as T,s as ie,f as re,Z as le,S as ce,am as ue,aQ as de,_ as H,aR as J,aS as ee,z as me}from"./index.ba6213b8.js";import{a as fe,Q as te}from"./QCardSection.fef8ccf3.js";import{Q as ae}from"./QCard.99f6fced.js";import{Q as ve}from"./QToggle.6aed9517.js";import{_ as W}from"./KennerSelect.76d83a67.js";import{_ as pe}from"./KennerButton.2158b9fa.js";import{Q as _e}from"./use-checkbox.54462b67.js";import{Q as ge,a as X}from"./QSelect.9a9294f2.js";import{Q as he}from"./QList.00bffe09.js";import"./reponsive.58479fee.js";import"./scroll.a6f9976b.js";const be=[V("circle",{cx:"50",cy:"50",r:"44",fill:"none","stroke-width":"4","stroke-opacity":".5",stroke:"currentColor"}),V("circle",{cx:"8",cy:"54",r:"6",fill:"currentColor","stroke-width":"3",stroke:"currentColor"},[V("animateTransform",{attributeName:"transform",type:"rotate",from:"0 50 48",to:"360 50 52",dur:"2s",repeatCount:"indefinite"})])];var ye=F({name:"QSpinnerOrbit",props:ne,setup(e){const{cSize:r,classes:n}=oe(e);return()=>V("svg",{class:n.value,width:r.value,height:r.value,viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",xmlns:"http://www.w3.org/2000/svg"},be)}});async function we(e,r=null){const n={game:e.game,selected_options:e.selected_options};r!==null&&(n.leagueId=r);try{return await P("/game/selected-games/",{method:"POST",data:n})}catch(s){throw new Error("Error creating selectedGame: "+s)}}async function xe(e){try{return await P(`/game/options/?game=${e}`)}catch(r){throw new Error(`Error retrieving game options for game with id: ${e} 
 ${r}`)}}async function Se(e){try{return await P(`/game/option-choices/?option=${e}`)}catch(r){throw new Error(`Error retrieving game option choices for game with id: ${e} 
 ${r}`)}}function ke(){const e=K({game:void 0,options:[]}),r=I(!1),n=I(),s=I(""),f=I([]),l=I([]),d=A(()=>l.value.filter(t=>(!n.value||t.platform===n.value.id)&&(!s.value||t.name.toLowerCase().includes(s.value.toLowerCase())))),c=async()=>{f.value=await i(),l.value=await B()},g=K({game:{id:-1,name:"",platform:""},selectedOptions:[]});async function S(t){e.game&&e.game.id===t.id||(r.value=!0,u(t),await b(t.id),await y(),r.value=!1)}function u(t){$(t),k(t)}function $(t){e.game=t,e.options=[]}function k(t){g.game=t,g.selectedOptions=[]}function Q(t){g.selectedOptions=t.map(w=>({id:w.id,selected_game:g.game.id,value:w.has_choices?void 0:!1,choice:void 0}))}function a(t){return g.selectedOptions.find(w=>w.id===t)}async function b(t){try{const{data:w}=await xe(t);e.options=w,Q(w)}catch(w){console.error(`Failed to fetch options for game ${t}:`,w),e.options=[]}}async function y(){for(const t of e.options){if(!t.has_choices)continue;const{data:w}=await Se(t.id);t.choices=[...t.choices||[],...w]}}function v(t){var w;return((w=e.options.find(L=>L.id===t))==null?void 0:w.choices)||null}async function i(){const{data:t}=await P("game/platforms/");return t}async function B(){const{data:t}=await P("game/games/");return t}function Y(t){const w=t.selectedOptions.map(L=>{const j={selected_game:t.game.id,game_option_id:L.id};return L.choice?{...j,choice_id:L.choice.id}:{...j,value:L.value}});return{game:t.game.id,selected_options:w}}function se(){if(g){const t=Y(g);return we(t)}else console.warn("No game selected")}return{gameInformation:e,gameSelection:g,isLoading:r,setGameInformation:S,findChoicesByOption:v,findSelectedOption:a,submitGame:se,platform:n,filter:s,platforms:f,gameData:l,filteredGames:d,loadPlatformsAndGames:c}}const $e=m("div",{class:"text-h6"},"W\xE4hle dein Spiel",-1),Ce={class:"row"},Ge={class:"row games-container q-mt-lg"},Ne={class:"text-subtitle2"},Be={class:"text-caption"},qe={key:0},Ie={key:1,class:"q-py-md q-my-md"},Ae={class:"text-h6"},Qe={key:0,class:"text-italic"},Ee={key:0},Oe=D({__name:"GameSelector",emits:["submit-success"],setup(e,{emit:r}){const{gameInformation:n,gameSelection:s,isLoading:f,setGameInformation:l,findChoicesByOption:d,findSelectedOption:c,submitGame:x,platform:g,filter:S,platforms:u,filteredGames:$,loadPlatformsAndGames:k}=ke(),Q=r,a=async()=>{try{await x(),Q("submit-success")}catch(y){console.error("Error submitting game:",y)}};function b(y){var i;const v=u.value.find(B=>B.id===y);return(i=v==null?void 0:v.name)!=null?i:`ID: ${y}`}return Z(k),(y,v)=>(o(),p("div",null,[$e,m("div",Ce,[_(W,{class:"select-width q-mr-md",modelValue:h(g),"onUpdate:modelValue":v[0]||(v[0]=i=>R(g)?g.value=i:null),"option-value":"name","option-label":"name",options:h(u),label:"Platform"},null,8,["modelValue","options"]),_(fe,{modelValue:h(S),"onUpdate:modelValue":v[2]||(v[2]=i=>R(S)?S.value=i:null),label:"Spiel"},{append:C(()=>[h(S)?(o(),N(E,{key:0,name:"close",onClick:v[1]||(v[1]=i=>S.value=""),class:"cursor-pointer"})):q("",!0),_(E,{name:"search"})]),_:1},8,["modelValue"])]),m("div",Ge,[(o(!0),p(M,null,U(h($),i=>(o(),N(ae,{key:i.id,onClick:B=>h(l)(i),class:T(["q-ma-sm cursor-pointer hoverable-card",{"bg-secondary text-white":i.id===h(s).game.id}]),clickable:""},{default:C(()=>[_(te,null,{default:C(()=>[m("div",Ne,G(i.name),1),m("div",Be,G(b(i.platform)),1)]),_:2},1024)]),_:2},1032,["onClick","class"]))),128))]),h(f)?(o(),p("div",qe,[_(ye,{size:"xl"})])):h(n).game?(o(),p("div",Ie,[m("span",Ae,G(h(n).game.name),1),h(n).options.length?(o(),p(M,{key:1},[O(G(h(n).options)+" ",1),(o(!0),p(M,null,U(h(n).options,i=>(o(),p("div",{key:i.id,class:"q-py-sm q-mx-md"},[i.has_choices?(o(),p("div",Ee,[_(W,{options:h(d)(i.id),label:i.name,"option-label":"name",modelValue:h(s).selectedOptions.find(B=>B.id==i.id).choice,"onUpdate:modelValue":B=>h(s).selectedOptions.find(Y=>Y.id==i.id).choice=B,class:"select-width inline-block"},null,8,["options","label","modelValue","onUpdate:modelValue"])])):(o(),N(ve,{key:1,modelValue:h(c)(i.id).value,"onUpdate:modelValue":B=>h(c)(i.id).value=B,label:i.name},null,8,["modelValue","onUpdate:modelValue","label"]))]))),128))],64)):(o(),p("div",Qe," Spiel hat keine weiteren Optionen "))])):q("",!0),_(pe,{onClick:a,type:"submit",push:"",color:"positive",label:"Speichern",class:"q-mt-md"})]))}}),Le=["top","middle","bottom"];var z=F({name:"QBadge",props:{color:String,textColor:String,floating:Boolean,transparent:Boolean,multiLine:Boolean,outline:Boolean,rounded:Boolean,label:[Number,String],align:{type:String,validator:e=>Le.includes(e)}},setup(e,{slots:r}){const n=A(()=>e.align!==void 0?{verticalAlign:e.align}:null),s=A(()=>{const f=e.outline===!0&&e.color||e.textColor;return`q-badge flex inline items-center no-wrap q-badge--${e.multiLine===!0?"multi":"single"}-line`+(e.outline===!0?" q-badge--outline":e.color!==void 0?` bg-${e.color}`:"")+(f!==void 0?` text-${f}`:"")+(e.floating===!0?" q-badge--floating":"")+(e.rounded===!0?" q-badge--rounded":"")+(e.transparent===!0?" q-badge--transparent":"")});return()=>V("div",{class:s.value,style:n.value,role:"status","aria-label":e.label},ie(r.default,e.label!==void 0?[e.label]:[]))}}),Ve=F({name:"QSlideTransition",props:{appear:Boolean,duration:{type:Number,default:300}},emits:["show","hide"],setup(e,{slots:r,emit:n}){let s=!1,f,l,d=null,c=null,x,g;function S(){f&&f(),f=null,s=!1,d!==null&&(clearTimeout(d),d=null),c!==null&&(clearTimeout(c),c=null),l!==void 0&&l.removeEventListener("transitionend",x),x=null}function u(a,b,y){b!==void 0&&(a.style.height=`${b}px`),a.style.transition=`height ${e.duration}ms cubic-bezier(.25, .8, .50, 1)`,s=!0,f=y}function $(a,b){a.style.overflowY=null,a.style.height=null,a.style.transition=null,S(),b!==g&&n(b)}function k(a,b){let y=0;l=a,s===!0?(S(),y=a.offsetHeight===a.scrollHeight?0:void 0):(g="hide",a.style.overflowY="hidden"),u(a,y,b),d=setTimeout(()=>{d=null,a.style.height=`${a.scrollHeight}px`,x=v=>{c=null,(Object(v)!==v||v.target===a)&&$(a,"show")},a.addEventListener("transitionend",x),c=setTimeout(x,e.duration*1.1)},100)}function Q(a,b){let y;l=a,s===!0?S():(g="show",a.style.overflowY="hidden",y=a.scrollHeight),u(a,y,b),d=setTimeout(()=>{d=null,a.style.height=0,x=v=>{c=null,(Object(v)!==v||v.target===a)&&$(a,"hide")},a.addEventListener("transitionend",x),c=setTimeout(x,e.duration*1.1)},100)}return re(()=>{s===!0&&S()}),()=>V(le,{css:!1,appear:e.appear,onEnter:k,onLeave:Q},r.default)}});const Pe=e=>(J("data-v-7cb945c4"),e=e(),ee(),e),Te={class:"q-mt-xl"},Me={key:0,class:"q-mb-sm"},Ue={class:"text-h6"},De={key:0,class:"text-secondary"},Ye={key:1},ze=Pe(()=>m("div",{class:"text-caption text-weight-medium"},"Gebanntes Spiel:",-1)),Fe={class:"text-body2 text-weight-bold text-negative"},He={key:2,class:"text-caption text-grey-6"},je=D({__name:"SelectedGameInfo",props:{member:{},status:{},isActive:{type:Boolean}},emits:["select-for-ban"],setup(e,{emit:r}){const n=A(()=>s.status!=="BANNING"&&s.isActive),s=e,f=I(!1);return(l,d)=>(o(),p("div",Te,[l.member.selected_game?(o(),p("div",Me,[_(ae,{flat:l.status!=="BANNING",bordered:"",class:T(["q-mb-md q-pa-sm shadow-1 hover-card",{"cursor-pointer ":n.value}]),onClick:d[2]||(d[2]=c=>l.$emit("select-for-ban"))},{default:C(()=>[_(te,{class:"row items-center justify-between"},{default:C(()=>[m("div",Ue,[O(G(l.member.selected_game.game_name)+" ",1),n.value?(o(),N(z,{key:0,color:"accent","text-color":"white",class:"cursor-pointer q-ml-sm q-py-xs q-px-sm",onClick:d[0]||(d[0]=c=>l.$emit("select-for-ban"))},{default:C(()=>[O(" Bannen ")]),_:1})):q("",!0)]),_(ce,{flat:"",dense:"",round:"",icon:"expand_more",class:T(["material-symbols-outlined",{"rotate-180":f.value}]),onClick:d[1]||(d[1]=c=>f.value=!f.value),color:"primary"},null,8,["class"])]),_:1}),_(Ve,null,{default:C(()=>[ue(m("div",null,[_(_e,{spaced:""}),_(he,{dense:""},{default:C(()=>[(o(!0),p(M,null,U(l.member.selected_game.selected_options,c=>(o(),N(ge,{key:c.id},{default:C(()=>[_(X,null,{default:C(()=>[O(G(c.game_option.name),1)]),_:2},1024),_(X,{side:"",class:"text-right"},{default:C(()=>[c.choice?(o(),p("span",De,G(c.choice.name),1)):c.value===!0?(o(),N(E,{key:1,name:"check_circle",class:"material-symbols-outlined",color:"positive"})):c.value===!1?(o(),N(E,{key:2,name:"cancel",class:"material-symbols-outlined",color:"negative"})):(o(),N(E,{key:3,name:"help",class:"material-symbols-outlined",color:"grey"}))]),_:2},1024)]),_:2},1024))),128))]),_:1})],512),[[de,f.value]])]),_:1})]),_:1},8,["flat","class"])])):q("",!0),l.member.banned_game?(o(),p("div",Ye,[ze,m("div",Fe,G(l.member.banned_game),1)])):q("",!0),!l.member.selected_game&&!l.member.banned_game?(o(),p("div",He," Noch keine Auswahl oder Bann. ")):q("",!0)]))}});var Ke=H(je,[["__scopeId","data-v-7cb945c4"]]);const Re={class:"q-pa-xl rounded-borders relative full-height",style:{minHeight:"240px"}},We={class:"row items-center justify-between"},Xe={class:"text-subtitle1 text-weight-bold row items-center"},Ze={key:0,class:"q-ml-sm active-player-indicator"},Je={class:"row q-gutter-xs items-center"},et=D({__name:"LeagueUserCard",props:{member:{},isActive:{type:Boolean},status:{}},setup(e){const r=e,n=A(()=>r.status==="BANNING"?"bg-accent":"bg-secondary");return(s,f)=>(o(),p("div",Re,[m("div",We,[m("div",Xe,[O(G(s.member.username)+" ",1),s.isActive?(o(),p("div",Ze,[m("span",{class:T(["dot q-mr-xs",n.value])},null,2)])):q("",!0)]),m("div",Je,[s.member.selected_game?(o(),N(z,{key:0,color:"primary","text-color":"white"},{default:C(()=>[O(" GAME "),_(E,{name:"check"})]),_:1})):q("",!0),s.member.banned_game?(o(),N(z,{key:1,color:"negative","text-color":"white"},{default:C(()=>[O(" BAN "),_(E,{name:"check"})]),_:1})):q("",!0)])]),_(Ke,{member:s.member,status:s.status,isActive:s.isActive},null,8,["member","status","isActive"])]))}});var tt=H(et,[["__scopeId","data-v-7c55814e"]]);const at=e=>(J("data-v-076f75f7"),e=e(),ee(),e),st={class:"q-pa-lg"},nt={class:"q-pa-lg column justify-center items-center text-primary border border-primary rounded-borders"},ot={class:"text-h6 text-uppercase text-weight-bold q-mb-sm"},it={class:"text-subtitle1 text-center"},rt={class:"text-primary text-weight-bold"},lt=at(()=>m("span",{class:"q-mx-xs"},"muss ein Spiel",-1)),ct={style:{display:"grid","grid-template-columns":"1fr 1fr","grid-template-rows":"1fr 1fr",height:"100%",gap:"0"}},ut=1,dt=D({__name:"MyLeague",setup(e){const r=u=>{switch(u){case 0:return"border-right border-bottom";case 1:return"border-left border-bottom";case 2:return"border-right border-top";case 3:return"border-left border-top";default:return""}},n=I(null),s=I([]);I(null);const{isMe:f}=me(),l=async()=>{const{data:u}=await P.get(`league/league-details/${ut}`);n.value=u,s.value=u.members};Z(async()=>{try{await l()}catch(u){console.error("Error loading league details:",u)}});const d=A(()=>s.value.find(u=>u.is_active_player)),c=A(()=>d.value?f(d.value.username):!1),x={PICKING:{noun:"Spielauswahl",verb:"ausw\xE4hlen"},BANNING:{noun:"Bannen",verb:"bannen"},PLAYING:{noun:"Spiele laufen"},DONE:{noun:"Beendet"}},g=A(()=>{var u,$,k;return(k=($=x[(u=n.value)==null?void 0:u.status])==null?void 0:$.noun)!=null?k:""}),S=A(()=>{var u,$,k;return(k=($=x[(u=n.value)==null?void 0:u.status])==null?void 0:$.verb)!=null?k:""});return(u,$)=>{var k,Q,a;return o(),p("div",st,[m("div",nt,[m("div",ot,G(g.value)+" "+G(),1),m("div",it,[m("span",rt,G((k=d.value)==null?void 0:k.username),1),lt,m("span",{class:T(["text-weight-bold",{"text-accent":((Q=n.value)==null?void 0:Q.status)===" BANNING","text-secondary":((a=n.value)==null?void 0:a.status)==="PICKING"}])},G(S.value),3)])]),c.value&&n.value.status==="PICKING"?(o(),N(Oe,{key:0,onSubmitSuccess:l,class:"q-mt-xl"})):q("",!0),m("div",ct,[(o(!0),p(M,null,U(s.value,(b,y)=>(o(),p("div",{key:b.id,class:T(r(y))},[_(tt,{status:n.value.status,member:b,isActive:b.is_active_player},null,8,["status","member","isActive"])],2))),128))])])}}});var St=H(dt,[["__scopeId","data-v-076f75f7"]]);export{St as default};
