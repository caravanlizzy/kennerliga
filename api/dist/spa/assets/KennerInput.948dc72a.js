import{b as C,h as F,K as P,L as B,e as E,k as I,J as q,g as A,M,N as k,j as Q,t as R,O as j,y as K,P as O,Q as D,o as _,c as z}from"./index.ba6213b8.js";import{g as J}from"./reponsive.58479fee.js";import{a as L}from"./QCardSection.fef8ccf3.js";var w=C({name:"QForm",props:{autofocus:Boolean,noErrorFocus:Boolean,noResetFocus:Boolean,greedy:Boolean,onSubmit:Function},emits:["reset","validationSuccess","validationError"],setup(a,{slots:d,emit:u}){const c=A(),r=F(null);let i=0;const l=[];function v(e){const s=typeof e=="boolean"?e:a.noErrorFocus!==!0,m=++i,h=(o,t)=>{u("validation"+(o===!0?"Success":"Error"),t)},x=o=>{const t=o.validate();return typeof t.then=="function"?t.then(n=>({valid:n,comp:o}),n=>({valid:!1,comp:o,err:n})):Promise.resolve({valid:t,comp:o})};return(a.greedy===!0?Promise.all(l.map(x)).then(o=>o.filter(t=>t.valid!==!0)):l.reduce((o,t)=>o.then(()=>x(t).then(n=>{if(n.valid===!1)return Promise.reject(n)})),Promise.resolve()).catch(o=>[o])).then(o=>{if(o===void 0||o.length===0)return m===i&&h(!0),!0;if(m===i){const{comp:t,err:n}=o[0];if(n!==void 0&&console.error(n),h(!1,t),s===!0){const S=o.find(({comp:V})=>typeof V.focus=="function"&&M(V.$)===!1);S!==void 0&&S.comp.focus()}}return!1})}function p(){i++,l.forEach(e=>{typeof e.resetValidation=="function"&&e.resetValidation()})}function b(e){e!==void 0&&k(e);const s=i+1;v().then(m=>{s===i&&m===!0&&(a.onSubmit!==void 0?u("submit",e):e!==void 0&&e.target!==void 0&&typeof e.target.submit=="function"&&e.target.submit())})}function y(e){e!==void 0&&k(e),u("reset"),Q(()=>{p(),a.autofocus===!0&&a.noResetFocus!==!0&&f()})}function f(){J(()=>{if(r.value===null)return;const e=r.value.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||r.value.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||r.value.querySelector("[autofocus], [data-autofocus]")||Array.prototype.find.call(r.value.querySelectorAll("[tabindex]"),s=>s.tabIndex>-1);e!=null&&e.focus({preventScroll:!0})})}R(j,{bindComponent(e){l.push(e)},unbindComponent(e){const s=l.indexOf(e);s>-1&&l.splice(s,1)}});let g=!1;return P(()=>{g=!0}),B(()=>{g===!0&&a.autofocus===!0&&f()}),E(()=>{a.autofocus===!0&&f()}),Object.assign(c.proxy,{validate:v,resetValidation:p,submit:b,reset:y,focus:f,getValidationComponents:()=>l}),()=>I("form",{class:"q-form",ref:r,onSubmit:b,onReset:y},q(d.default))}});const G=K({__name:"KennerInput",props:O({rules:{},label:{},dark:{type:Boolean,default:!1}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(a){const d=D(a,"modelValue");return(u,c)=>(_(),z(L,{"hide-bottom-space":"",dark:u.dark,color:"primary",modelValue:d.value,"onUpdate:modelValue":c[0]||(c[0]=r=>d.value=r),label:u.label,"lazy-rules":"",rules:u.rules},null,8,["dark","modelValue","label","rules"]))}});export{w as Q,G as _};
